<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping List</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 400px;
        margin: 50px auto;
        padding: 20px;
      }
      .container {
        border: 2px solid #ddd;
        padding: 20px;
        border-radius: 10px;
      }
      .input-group {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
      #itemInput {
        flex: 1;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      #addBtn {
        padding: 8px 15px;
        background: #28a745;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      .list-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px;
        border-bottom: 1px solid #eee;
      }
      .delete-btn {
        background: #dc3545;
        color: white;
        border: none;
        padding: 4px 8px;
        border-radius: 3px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Shopping List</h2>
      <div class="input-group">
        <input type="text" id="itemInput" placeholder="Enter item..." />
        <button id="addBtn">Add</button>
      </div>
      <div id="itemList">
        <!-- Items will be added here -->
      </div>
    </div>
    <script>
      const itemInput = document.getElementById("itemInput");
      const addBtn = document.getElementById("addBtn");
      const itemList = document.getElementById("itemList");

      // 2. Create function to add item
      let items = [];
      function addItem() {
        const inputValue = itemInput.value;
        items.push(inputValue);

        // filter out empty values, because what if user keeps on clicking add button like an idiot
        items = items.filter((item) => {
          return item.trim() !== "";
        });

        // first clean and re-render from the list
        itemList.innerHTML = "";
        items.forEach((i, index) => {
          itemList.innerHTML += `
          <div class="list-item" data-index="${index}">
            <p>${i}</p>
            <button class="delete-btn" id="delete-btn">Delete</button>
          </div>`;
        });
        itemInput.value = "";
        console.log(items);
      }

      // 3. Create function to remove item
      function removeItem(button) {
        // since the event listener has been added to the parent, i'll allow this function to be executable only if the clicked target is the delete button
        if (button.target.classList.contains("delete-btn")) {
          const index = button.target.parentElement.dataset.index;
          items.splice(index, 1);
          addItem();
        }
      }
      // 4. Add event listeners
      addBtn.addEventListener("click", addItem);

      // i am adding delete event listener to the parent item because at the end i'll be deleting the whole list item element
      itemList.addEventListener("click", (ev) => removeItem(ev));

      // allowing user to add by pressing key
      itemInput.addEventListener("keydown", (e) => {
        // only for enter key, else it's gonna be a disaster
        if (e.key === "Enter") {
          addItem();
        }
      });
    </script>
  </body>
</html>
